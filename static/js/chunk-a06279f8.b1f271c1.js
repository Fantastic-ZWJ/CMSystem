(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a06279f8"],{6556:function(e,t,r){"use strict";var n=r("41c4"),i=r("7029"),o=r("b732"),s=r("dcb8"),a=r("fa94"),c=i([].join),l=o!=Object,u=a("join",",");n({target:"Array",proto:!0,forced:l||!u},{join:function(e){return c(s(this),void 0===e?",":e)}})},"6ad0":function(e,t,r){"use strict";var n=r("41c4"),i=r("f1f3").left,o=r("fa94"),s=r("6aed"),a=r("75d4"),c=o("reduce"),l=!a&&s>79&&s<83;n({target:"Array",proto:!0,forced:!c||l},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},b5ab:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),r("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),r("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),r("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},i=[],o=(r("6ad0"),r("428b"),r("2760"),r("6556"),r("7e75"),r("ec3f"),r("1965"),r("90bc"),{name:"roleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;this.$API.permission.toAssign(e).then((function(e){var r=e.data.children;t.allPermissions=r;var n=t.getCheckedIds(r);t.$refs.tree.setCheckedKeys(n)}))},getCheckedIds:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,n){return n.select&&4===n.level?e.push(n.id):n.children&&t.getCheckedIds(n.children,r),e}),r)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,this.$API.permission.doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var r=e.$route.query.roleName,n=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),n.includes(r)&&window.location.reload()}))}))}}}),s=o,a=r("0b56"),c=Object(a["a"])(s,n,i,!1,null,null,null);t["default"]=c.exports},f1f3:function(e,t,r){var n=r("813e"),i=r("99f6"),o=r("b732"),s=r("08fb"),a=TypeError,c=function(e){return function(t,r,c,l){n(r);var u=i(t),d=o(u),f=s(u),h=e?f-1:0,p=e?-1:1;if(c<2)while(1){if(h in d){l=d[h],h+=p;break}if(h+=p,e?h<0:f<=h)throw a("Reduce of empty array with no initial value")}for(;e?h>=0:f>h;h+=p)h in d&&(l=r(l,d[h],h,u));return l}};e.exports={left:c(!1),right:c(!0)}}}]);